# PFC-Figma2Claude Quick Start Guide

## Complete Layout Extraction via MCP

**Version:** 1.0.0  
**Last Updated:** 2025-01-17  
**Audience:** Developers, Solution Architects, UI Engineers

---

## ğŸ“‹ Table of Contents

1. [Overview](#1-overview)
2. [Prerequisites](#2-prerequisites)
3. [Step 1: Prepare Your Figma File](#3-step-1-prepare-your-figma-file)
4. [Step 2: Get File Key & Node ID](#4-step-2-get-file-key--node-id)
5. [Step 3: Extract Design Tokens](#5-step-3-extract-design-tokens)
6. [Step 4: Extract Complete Layout](#6-step-4-extract-complete-layout)
7. [Step 5: Generate Production Code](#7-step-5-generate-production-code)
8. [Step 6: Integrate with Agent SDK](#8-step-6-integrate-with-agent-sdk)
9. [Automation Options](#9-automation-options)
10. [Troubleshooting](#10-troubleshooting)

---

## 1. Overview

### What This Guide Covers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚    FIGMA MAKE                MCP                    CLAUDE AGENT        â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚ Completeâ”‚   â”€â”€â”€â”€â”€â”€â–¶   â”‚Extractâ”‚   â”€â”€â”€â”€â”€â”€â–¶     â”‚ Production â”‚       â”‚
â”‚    â”‚ Layout  â”‚             â”‚ via  â”‚               â”‚ Next.js    â”‚       â”‚
â”‚    â”‚ Design  â”‚             â”‚ MCP  â”‚               â”‚ Code       â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    Includes:                Returns:               Generates:           â”‚
â”‚    â€¢ Frames                 â€¢ Code                 â€¢ Components         â”‚
â”‚    â€¢ Components             â€¢ Tokens               â€¢ TypeScript         â”‚
â”‚    â€¢ Tokens                 â€¢ Assets               â€¢ Tailwind CSS       â”‚
â”‚    â€¢ Assets                 â€¢ Structure            â€¢ shadcn/ui          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Principle: MCP Handles Everything

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚   âŒ WITHOUT MCP                  âœ… WITH MCP                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                                                â”‚
â”‚   You manage:                     MCP handles:                 â”‚
â”‚   â€¢ Figma API auth               â€¢ Authentication              â”‚
â”‚   â€¢ Rate limiting                â€¢ Rate limits                 â”‚
â”‚   â€¢ Response parsing             â€¢ JSON parsing                â”‚
â”‚   â€¢ Code transformation          â€¢ Code generation             â”‚
â”‚   â€¢ Asset URL handling           â€¢ Asset URLs                  â”‚
â”‚   â€¢ Error handling               â€¢ Errors                      â”‚
â”‚                                                                â”‚
â”‚   = 500+ lines of code           = 1 tool call                 â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Prerequisites

### Checklist

| Requirement | Status | Notes |
|-------------|--------|-------|
| â˜ Figma Account | Required | With edit access to target file |
| â˜ MCP Figma Connection | Required | Connected in Claude/your agent |
| â˜ Figma File URL | Required | The design you want to extract |
| â˜ Target Node ID | Required | Frame/page to extract |

### MCP Tools You'll Use

| Tool | Purpose | When to Use |
|------|---------|-------------|
| `get_design_context` | **PRIMARY** - Extract full layout code | Always |
| `get_variable_defs` | Extract design tokens | For theming |
| `get_metadata` | Get structure overview | Large files |

---

## 3. Step 1: Prepare Your Figma File

### Figma Best Practices for Clean Extraction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FIGMA FILE STRUCTURE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“ Your Project                                                â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“„ Pages                                                   â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ–¼ï¸ Dashboard        â—€â”€â”€ Target this frame             â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ–¼ï¸ Settings                                           â”‚
â”‚  â”‚   â””â”€â”€ ğŸ–¼ï¸ Profile                                            â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“„ Components                                              â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ”² Button                                              â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ”² Card                                                â”‚
â”‚  â”‚   â””â”€â”€ ğŸ”² Input                                               â”‚
â”‚  â”‚                                                              â”‚
â”‚  â””â”€â”€ ğŸ“„ Tokens (Variables)                                      â”‚
â”‚      â”œâ”€â”€ ğŸ¨ Colors                                              â”‚
â”‚      â”œâ”€â”€ ğŸ“ Typography                                          â”‚
â”‚      â””â”€â”€ ğŸ“ Spacing                                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pre-Extraction Checklist

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  â˜ 1. USE AUTO-LAYOUT                                          â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚     Figma Auto-Layout â†’ Flexbox/Grid in code                    â”‚
â”‚                                                                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚     â”‚ â‰¡ Auto   â”‚   =    â”‚ display: flex;       â”‚               â”‚
â”‚     â”‚  Layout  â”‚        â”‚ flex-direction: col; â”‚               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â˜ 2. NAME YOUR LAYERS                                         â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚     Good names â†’ Good component/class names                     â”‚
â”‚                                                                 â”‚
â”‚     âŒ "Frame 427"     â†’  className="frame-427"                 â”‚
â”‚     âœ… "MetricCard"    â†’  className="metric-card"               â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â˜ 3. USE DESIGN TOKENS                                        â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚     Link colors/fonts to Variables                              â”‚
â”‚                                                                 â”‚
â”‚     Variable: color/primary  â†’  var(--primary)                  â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â˜ 4. SET CONSTRAINTS                                          â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚     Constraints â†’ Responsive behavior                           â”‚
â”‚                                                                 â”‚
â”‚     "Scale" constraint  â†’  width: 100%                          â”‚
â”‚     "Fixed" constraint  â†’  width: 200px                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Step 2: Get File Key & Node ID

### URL Anatomy

```
https://www.figma.com/design/ABC123xyz/My-Project?node-id=456-789
                              â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€
                                  â”‚                   â”‚
                                  â–¼                   â–¼
                             FILE KEY            NODE ID
                            (required)          (required)
```

### Extraction Examples

| URL Pattern | File Key | Node ID |
|-------------|----------|---------|
| `figma.com/design/ABC123/Name?node-id=456-789` | `ABC123` | `456:789` |
| `figma.com/design/XYZ789/Name?node-id=12-34` | `XYZ789` | `12:34` |
| `figma.com/file/DEF456/Name` | `DEF456` | Use `0:1` for root |

### How to Find Node ID in Figma

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  METHOD 1: From URL (Easiest)                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚                                                                 â”‚
â”‚  1. Click on the frame you want in Figma                        â”‚
â”‚  2. Look at the URL bar                                         â”‚
â”‚  3. Copy the node-id parameter                                  â”‚
â”‚                                                                 â”‚
â”‚     ?node-id=123-456  â†’  Node ID: 123:456                       â”‚
â”‚              â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  METHOD 2: Right-Click Menu                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚                                                                 â”‚
â”‚  1. Right-click the frame                                       â”‚
â”‚  2. Select "Copy/Paste as" â†’ "Copy link"                        â”‚
â”‚  3. Paste and extract node-id from URL                          â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  METHOD 3: Dev Mode                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
â”‚                                                                 â”‚
â”‚  1. Toggle Dev Mode (</> icon)                                  â”‚
â”‚  2. Select frame                                                â”‚
â”‚  3. Node ID shown in properties panel                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Step 3: Extract Design Tokens

### MCP Tool: `get_variable_defs`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  TOOL CALL                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚                                                                 â”‚
â”‚  {                                                              â”‚
â”‚    "tool": "Figma:get_variable_defs",                          â”‚
â”‚    "parameters": {                                              â”‚
â”‚      "fileKey": "YOUR_FILE_KEY",                               â”‚
â”‚      "nodeId": "0:1",              â—€â”€â”€ Root node for all tokens â”‚
â”‚      "clientFrameworks": "react,nextjs",                       â”‚
â”‚      "clientLanguages": "typescript,css"                       â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  RESPONSE: Design Tokens                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                                 â”‚
â”‚  {                                                              â”‚
â”‚    "color/primary/default": "#0066FF",                         â”‚
â”‚    "color/primary/hover": "#0052CC",                           â”‚
â”‚    "color/background/default": "#FFFFFF",                      â”‚
â”‚    "color/text/primary": "#111827",                            â”‚
â”‚    "typography/heading-1/fontSize": "32px",                    â”‚
â”‚    "typography/body/fontSize": "16px",                         â”‚
â”‚    "spacing/sm": "8px",                                        â”‚
â”‚    "spacing/md": "16px",                                       â”‚
â”‚    "spacing/lg": "24px",                                       â”‚
â”‚    "radius/md": "8px"                                          â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Token Mapping to CSS Variables

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  FIGMA VARIABLE              CSS VARIABLE                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚                                                                 â”‚
â”‚  color/primary/default   â†’   --primary                          â”‚
â”‚  color/background/default â†’   --background                      â”‚
â”‚  color/text/primary      â†’   --foreground                       â”‚
â”‚  spacing/md              â†’   --spacing-4  (or 1rem)             â”‚
â”‚  radius/md               â†’   --radius                           â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                 â”‚
â”‚  /* Generated globals.css */                                    â”‚
â”‚  :root {                                                        â”‚
â”‚    --primary: 221.2 83.2% 53.3%;                               â”‚
â”‚    --background: 0 0% 100%;                                     â”‚
â”‚    --foreground: 222.2 84% 4.9%;                               â”‚
â”‚    --radius: 0.5rem;                                            â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Step 4: Extract Complete Layout

### MCP Tool: `get_design_context`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  TOOL CALL                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚                                                                 â”‚
â”‚  {                                                              â”‚
â”‚    "tool": "Figma:get_design_context",                         â”‚
â”‚    "parameters": {                                              â”‚
â”‚      "fileKey": "YOUR_FILE_KEY",                               â”‚
â”‚      "nodeId": "456:789",          â—€â”€â”€ Your target frame        â”‚
â”‚      "clientFrameworks": "react,nextjs",                       â”‚
â”‚      "clientLanguages": "typescript,css"                       â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### What Gets Extracted

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  FIGMA FRAME                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Dashboard                                                â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ Header                                               â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [Logo] [Nav] [Nav] [Nav]              [Avatar]       â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”‚ Sidebar â”‚ â”‚ Content                               â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ [Link]  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ [Link]  â”‚ â”‚ â”‚ Card 1  â”‚ â”‚ Card 2  â”‚ â”‚ Card 3  â”‚   â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ [Link]  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    get_design_context
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  RESPONSE                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚                                                                 â”‚
â”‚  {                                                              â”‚
â”‚    "code": "                                                    â”‚
â”‚      <div className=\"flex min-h-screen\">                      â”‚
â”‚        <header className=\"flex items-center h-16 px-6...\">    â”‚
â”‚          <div className=\"font-bold\">Logo</div>                â”‚
â”‚          <nav className=\"flex gap-4 ml-8\">...</nav>           â”‚
â”‚          <div className=\"ml-auto\">                            â”‚
â”‚            <Avatar />                                           â”‚
â”‚          </div>                                                 â”‚
â”‚        </header>                                                â”‚
â”‚        <aside className=\"w-64 border-r\">...</aside>           â”‚
â”‚        <main className=\"flex-1 p-6\">                          â”‚
â”‚          <div className=\"grid grid-cols-3 gap-4\">             â”‚
â”‚            <Card>...</Card>                                     â”‚
â”‚            <Card>...</Card>                                     â”‚
â”‚            <Card>...</Card>                                     â”‚
â”‚          </div>                                                 â”‚
â”‚        </main>                                                  â”‚
â”‚      </div>                                                     â”‚
â”‚    ",                                                           â”‚
â”‚    "assets": {                                                  â”‚
â”‚      "logo.svg": "https://figma-api.s3.../logo.svg",           â”‚
â”‚      "avatar.png": "https://figma-api.s3.../avatar.png"        â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Large Layouts: Use `get_metadata` First

For complex pages, get the structure overview first:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  STEP A: Get Structure Overview                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚
â”‚                                                                 â”‚
â”‚  Tool: get_metadata                                             â”‚
â”‚  Node: Page root (e.g., "0:1")                                  â”‚
â”‚                                                                 â”‚
â”‚  Returns XML structure:                                         â”‚
â”‚                                                                 â”‚
â”‚  <PAGE id="0:1" name="Dashboard">                              â”‚
â”‚    <FRAME id="123:456" name="Header" />      â—€â”€â”€ Extract this  â”‚
â”‚    <FRAME id="123:789" name="Sidebar" />     â—€â”€â”€ Or this       â”‚
â”‚    <FRAME id="123:012" name="MainContent" /> â—€â”€â”€ Or this       â”‚
â”‚  </PAGE>                                                        â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  STEP B: Extract Each Section                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚                                                                 â”‚
â”‚  Tool: get_design_context                                       â”‚
â”‚  Call for each frame ID you want                                â”‚
â”‚                                                                 â”‚
â”‚  get_design_context(nodeId="123:456") â†’ Header.tsx             â”‚
â”‚  get_design_context(nodeId="123:789") â†’ Sidebar.tsx            â”‚
â”‚  get_design_context(nodeId="123:012") â†’ MainContent.tsx        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Step 5: Generate Production Code

### Claude Agent Transformation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  INPUT: Raw MCP Output                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚                                                                 â”‚
â”‚  â€¢ Basic JSX structure                                          â”‚
â”‚  â€¢ Inline Tailwind classes                                      â”‚
â”‚  â€¢ Asset URLs                                                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    Claude Agent Processing
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  OUTPUT: Production Files                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ src/components/Dashboard/                                   â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“„ Dashboard.tsx                                          â”‚
â”‚  â”‚   â€¢ TypeScript component                                     â”‚
â”‚  â”‚   â€¢ shadcn/ui components imported                           â”‚
â”‚  â”‚   â€¢ Responsive breakpoints                                   â”‚
â”‚  â”‚   â€¢ Proper prop types                                        â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“„ Dashboard.types.ts                                     â”‚
â”‚  â”‚   â€¢ Interface definitions                                    â”‚
â”‚  â”‚   â€¢ Prop types                                               â”‚
â”‚  â”‚                                                              â”‚
â”‚  â””â”€â”€ ğŸ“„ index.ts                                               â”‚
â”‚      â€¢ Barrel export                                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example Generated Component

```tsx
// Dashboard.tsx - Generated from Figma
"use client";

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
import { Button } from "@/components/ui/button";
import { cn } from "@/lib/utils";

interface DashboardProps {
  className?: string;
  userName?: string;
}

export function Dashboard({ className, userName = "User" }: DashboardProps) {
  return (
    <div className={cn("flex min-h-screen bg-background", className)}>
      {/* Header */}
      <header className="fixed top-0 w-full h-16 px-6 flex items-center border-b bg-background z-50">
        <div className="font-bold text-xl">Logo</div>
        <nav className="flex gap-4 ml-8">
          <Button variant="ghost">Dashboard</Button>
          <Button variant="ghost">Analytics</Button>
          <Button variant="ghost">Settings</Button>
        </nav>
        <div className="ml-auto">
          <Avatar>
            <AvatarImage src="/avatar.png" />
            <AvatarFallback>{userName[0]}</AvatarFallback>
          </Avatar>
        </div>
      </header>

      {/* Sidebar */}
      <aside className="fixed left-0 top-16 w-64 h-[calc(100vh-4rem)] border-r p-4">
        {/* Sidebar content */}
      </aside>

      {/* Main Content */}
      <main className="ml-64 mt-16 flex-1 p-6">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <Card>
            <CardHeader>
              <CardTitle>Metric 1</CardTitle>
            </CardHeader>
            <CardContent>
              <p className="text-3xl font-bold">1,234</p>
            </CardContent>
          </Card>
          {/* More cards... */}
        </div>
      </main>
    </div>
  );
}
```

---

## 8. Step 6: Integrate with Agent SDK

### Agent Tool Definition

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  AGENT REGISTRATION                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚                                                                 â”‚
â”‚  {                                                              â”‚
â”‚    "agent_id": "ui-generation-agent",                          â”‚
â”‚    "cluster": "generation",                                     â”‚
â”‚    "capabilities": [                                            â”‚
â”‚      "figma_extraction",                                        â”‚
â”‚      "code_generation",                                         â”‚
â”‚      "token_mapping"                                            â”‚
â”‚    ],                                                           â”‚
â”‚    "mcp_integrations": ["figma"],                              â”‚
â”‚    "tools": [                                                   â”‚
â”‚      {                                                          â”‚
â”‚        "name": "extract_figma_layout",                         â”‚
â”‚        "description": "Extract complete UI from Figma",        â”‚
â”‚        "input_schema": {                                        â”‚
â”‚          "figma_url": "string (required)",                     â”‚
â”‚          "output_format": "react_component | nextjs_page",     â”‚
â”‚          "apply_tokens": "boolean"                             â”‚
â”‚        }                                                        â”‚
â”‚      }                                                          â”‚
â”‚    ]                                                            â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agent Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  USER REQUEST                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚                                                                 â”‚
â”‚  "Extract the Dashboard page from my Figma file and            â”‚
â”‚   generate a Next.js page component"                            â”‚
â”‚                                                                 â”‚
â”‚  Figma URL: https://figma.com/design/ABC123/Project?node-id=1-2 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  AGENT EXECUTION                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚                                                                 â”‚
â”‚  Step 1: Parse URL                                              â”‚
â”‚          fileKey = "ABC123"                                     â”‚
â”‚          nodeId = "1:2"                                         â”‚
â”‚                                                                 â”‚
â”‚  Step 2: Extract tokens                                         â”‚
â”‚          â†’ get_variable_defs(fileKey, "0:1")                   â”‚
â”‚                                                                 â”‚
â”‚  Step 3: Extract layout                                         â”‚
â”‚          â†’ get_design_context(fileKey, nodeId)                 â”‚
â”‚                                                                 â”‚
â”‚  Step 4: Transform to production code                           â”‚
â”‚          â†’ Claude processes with shadcn/ui mapping             â”‚
â”‚                                                                 â”‚
â”‚  Step 5: Output files                                           â”‚
â”‚          â†’ Dashboard.tsx, Dashboard.types.ts, index.ts         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  OUTPUT                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ Generated files ready for your codebase                     â”‚
â”‚  ğŸ“‹ Figma manifest for change tracking                          â”‚
â”‚  ğŸ¨ Design tokens applied                                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Automation Options

### Option A: On-Demand (Manual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  WHEN: You need to extract a new design                         â”‚
â”‚                                                                 â”‚
â”‚  HOW:                                                           â”‚
â”‚  1. Copy Figma URL                                              â”‚
â”‚  2. Call agent: "Extract layout from [URL]"                    â”‚
â”‚  3. Receive generated code                                      â”‚
â”‚  4. Add to your project                                         â”‚
â”‚                                                                 â”‚
â”‚  BEST FOR: Initial development, new features                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Option B: Scheduled Sync (Automated)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  WHEN: Keep code in sync with evolving designs                  â”‚
â”‚                                                                 â”‚
â”‚  HOW:                                                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Schedule â”‚â”€â”€â”€â”€â–¶â”‚ Detect   â”‚â”€â”€â”€â”€â–¶â”‚ Generate â”‚â”€â”€â”€â”€â–¶â”‚ Create â”‚ â”‚
â”‚  â”‚ (Daily)  â”‚     â”‚ Changes  â”‚     â”‚ Updates  â”‚     â”‚ PR     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  TRIGGER OPTIONS:                                               â”‚
â”‚  â€¢ n8n workflow (recommended)                                   â”‚
â”‚  â€¢ GitHub Action (cron schedule)                                â”‚
â”‚  â€¢ Figma Webhook (real-time)                                    â”‚
â”‚                                                                 â”‚
â”‚  BEST FOR: Design systems, ongoing projects                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Option C: Webhook (Real-Time)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  WHEN: Immediate sync when designers update Figma               â”‚
â”‚                                                                 â”‚
â”‚  HOW:                                                           â”‚
â”‚                                                                 â”‚
â”‚  Figma File â”€â”€â–¶ Webhook â”€â”€â–¶ Your API â”€â”€â–¶ Agent â”€â”€â–¶ PR          â”‚
â”‚  (updated)      (fires)     (receives)   (runs)    (created)   â”‚
â”‚                                                                 â”‚
â”‚  SETUP:                                                         â”‚
â”‚  1. Configure Figma webhook for FILE_UPDATE events             â”‚
â”‚  2. Point to your endpoint: /api/webhooks/figma                â”‚
â”‚  3. Endpoint triggers Design Sync Agent                         â”‚
â”‚                                                                 â”‚
â”‚  BEST FOR: Fast-moving teams, CI/CD integration                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Troubleshooting

### Common Issues & Solutions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  ISSUE: "File not found" or permission error                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚                                                                 â”‚
â”‚  CAUSE: MCP doesn't have access to the file                     â”‚
â”‚                                                                 â”‚
â”‚  FIX:                                                           â”‚
â”‚  â€¢ Ensure Figma file is not in a private/restricted project     â”‚
â”‚  â€¢ Check MCP connection is authenticated                        â”‚
â”‚  â€¢ Verify file key is correct (not the full URL)               â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ISSUE: Empty or minimal code returned                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚                                                                 â”‚
â”‚  CAUSE: Node ID points to wrong element                         â”‚
â”‚                                                                 â”‚
â”‚  FIX:                                                           â”‚
â”‚  â€¢ Use get_metadata first to see structure                      â”‚
â”‚  â€¢ Target a FRAME, not a GROUP or COMPONENT instance           â”‚
â”‚  â€¢ Check node ID format: use "123:456" not "123-456"           â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ISSUE: No design tokens returned                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚
â”‚                                                                 â”‚
â”‚  CAUSE: Variables not published or not linked                   â”‚
â”‚                                                                 â”‚
â”‚  FIX:                                                           â”‚
â”‚  â€¢ In Figma: Publish your variable library                     â”‚
â”‚  â€¢ Ensure colors/fonts are linked to variables, not raw values â”‚
â”‚  â€¢ Use node ID "0:1" for root-level token extraction           â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ISSUE: Assets (images) not loading                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚                                                                 â”‚
â”‚  CAUSE: Figma asset URLs are temporary                          â”‚
â”‚                                                                 â”‚
â”‚  FIX:                                                           â”‚
â”‚  â€¢ Download assets immediately after extraction                 â”‚
â”‚  â€¢ Store in your project's public folder                       â”‚
â”‚  â€¢ Update src paths in generated code                          â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ISSUE: Generated code doesn't match design exactly             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                 â”‚
â”‚  CAUSE: Figma structure not optimized for code extraction       â”‚
â”‚                                                                 â”‚
â”‚  FIX:                                                           â”‚
â”‚  â€¢ Apply Auto-Layout to all frames                              â”‚
â”‚  â€¢ Name layers semantically                                     â”‚
â”‚  â€¢ Use constraints for responsive behavior                      â”‚
â”‚  â€¢ Review "Pre-Extraction Checklist" in Step 1                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Node ID Format Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  FORMAT CONVERSION                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚                                                                 â”‚
â”‚  URL format:    node-id=123-456                                â”‚
â”‚                         â”€â”€â”€â”€â”€â”€â”€                                 â”‚
â”‚                            â”‚                                    â”‚
â”‚                            â–¼                                    â”‚
â”‚  MCP format:    nodeId="123:456"                               â”‚
â”‚                         â”€â”€â”€â”€â”€â”€â”€                                 â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸  Always convert hyphens (-) to colons (:) for MCP calls    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Quick Reference Card

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  ğŸš€ FIGMA â†’ CLAUDE QUICK REFERENCE                              â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  EXTRACT TOKENS                                                 â”‚
â”‚  get_variable_defs(fileKey, "0:1")                             â”‚
â”‚                                                                 â”‚
â”‚  EXTRACT LAYOUT                                                 â”‚
â”‚  get_design_context(fileKey, nodeId)                           â”‚
â”‚                                                                 â”‚
â”‚  GET STRUCTURE (large files)                                    â”‚
â”‚  get_metadata(fileKey, nodeId)                                 â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  URL PARSING                                                    â”‚
â”‚  figma.com/design/[FILE_KEY]/Name?node-id=[NODE_ID]            â”‚
â”‚                                                                 â”‚
â”‚  NODE ID CONVERSION                                             â”‚
â”‚  URL: 123-456  â†’  MCP: 123:456                                 â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  OUTPUT STACK                                                   â”‚
â”‚  â€¢ Next.js 14 (App Router)                                     â”‚
â”‚  â€¢ TypeScript (strict)                                          â”‚
â”‚  â€¢ shadcn/ui components                                         â”‚
â”‚  â€¢ Tailwind CSS                                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Document Owner:** PF-Core Architecture Team  
**Version:** 1.0.0  
**Last Updated:** 2025-01-17
